{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass CartService {\n  // This function returns the cart.\n  // This needs to be updated to include a UserID parameter, which we'll hardcode\n  // for now, but will need to be updated to be dynamic later.\n  // for now we'll hardcode the UserID as the server, but this will definitely\n  // have to be updated later.\n  constructor(http) {\n    this.http = http;\n    // This is the cart. It's an array of IProduct objects.\n    //cart: IProduct[] = [];\n    this.cart = new BehaviorSubject([]);\n    this._nUserID = 1; // DJS: Hardcoded for now, but will need to be dynamic later.\n    //this.http.get<IProduct[]>('api/RobotCatalog').subscribe(\n    this.http.get(`/api/Cart/ProductsInCart/${this._nUserID}`).subscribe({\n      next: cart => this.cart.next(cart)\n    });\n  }\n  add(product) {\n    /* DJS: just push the individual product to the server, not the whole cart.\n     * The API on the server is expecting only a singular product, not the whole cart.\n     * Additionally, interestingly, if we do try to push the whole cart, the server will\n     * reject it with a 400 Bad Request error, presumably because the server realizes\n     * the we pushed and array of objects to it, not a singular object.  No problem,\n     * any shopping cart should only add one item at a time, not the whole cart, to the\n     * database.\n     */\n    //this.cart.push(product);\n    let prod = {\n      UserID: this._nUserID,\n      ProductID: product.productID\n    };\n    //let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\n    this.http.post('api/Cart/', prod).subscribe(response => {\n      //this.http.post('/api/Cart/' + this._nUserID + '/' + product.productID).subscribe((response) => {\n      //console.log('Added to cart: \"' + product.name + '\" with return code:' + response);\n    });\n  }\n  getCart() {\n    return this.cart.asObservable();\n  }\n  // This function removes a product from the cart.\n  remove(product) {\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\n    this.http.delete(url).subscribe(response => {\n      console.log('Removed from cart: \"' + product.name + '\" with return code:' + response);\n    });\n  }\n}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)(i0.ɵɵinject(i1.HttpClient));\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});\nexport { CartService };","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","http","cart","_nUserID","get","subscribe","next","add","product","prod","UserID","ProductID","productID","post","response","getCart","asObservable","remove","url","delete","console","log","name","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\djs\\dev\\Angular\\AngularFundamentals\\RobotClient\\Angular-01\\RobotClient\\src\\app\\cart\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { IProduct } from '../catalog/product.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class CartService\r\n{\r\n  // This is the cart. It's an array of IProduct objects.\r\n  //cart: IProduct[] = [];\r\n  private cart: BehaviorSubject<IProduct[]> = new BehaviorSubject<IProduct[]>([]);\r\n  private _nUserID:number = 1; // DJS: Hardcoded for now, but will need to be dynamic later.\r\n\r\n\r\n  // This function returns the cart.\r\n  // This needs to be updated to include a UserID parameter, which we'll hardcode\r\n  // for now, but will need to be updated to be dynamic later.\r\n  // for now we'll hardcode the UserID as the server, but this will definitely\r\n  // have to be updated later.\r\n  constructor(private http: HttpClient)\r\n  {\r\n    //this.http.get<IProduct[]>('api/RobotCatalog').subscribe(\r\n    this.http.get<IProduct[]>(`/api/Cart/ProductsInCart/${this._nUserID}` ).subscribe(\r\n{\r\n       next:(cart) => this.cart.next(cart),\r\n    });\r\n  }\r\n  \r\n  add(product: IProduct)\r\n  {\r\n\r\n    /* DJS: just push the individual product to the server, not the whole cart.\r\n     * The API on the server is expecting only a singular product, not the whole cart.\r\n     * Additionally, interestingly, if we do try to push the whole cart, the server will\r\n     * reject it with a 400 Bad Request error, presumably because the server realizes\r\n     * the we pushed and array of objects to it, not a singular object.  No problem,\r\n     * any shopping cart should only add one item at a time, not the whole cart, to the\r\n     * database.\r\n     */\r\n\r\n    //this.cart.push(product);\r\n\r\n    let prod = {UserID: this._nUserID, ProductID: product.productID};\r\n    //let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\r\n    this.http.post('api/Cart/', prod).subscribe((response) => {\r\n\r\n    //this.http.post('/api/Cart/' + this._nUserID + '/' + product.productID).subscribe((response) => {\r\n\r\n      //console.log('Added to cart: \"' + product.name + '\" with return code:' + response);\r\n    })\r\n  }\r\n\r\n  getCart(): Observable<IProduct[]>\r\n  {\r\n    return this.cart.asObservable();\r\n  }\r\n\r\n  // This function removes a product from the cart.\r\n  remove(product: IProduct)\r\n  {\r\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\r\n\r\n    this.http.delete(url).subscribe((response) => {\r\n      console.log('Removed from cart: \"' + product.name + '\" with return code:' + response);\r\n    })\r\n   }\r\n\r\n}\r\n\r\n"],"mappings":"AAGA,SAASA,eAAe,QAAoB,MAAM;;;AAElD,MAIaC,WAAW;EAQtB;EACA;EACA;EACA;EACA;EACAC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAXxB;IACA;IACQ,KAAAC,IAAI,GAAgC,IAAIJ,eAAe,CAAa,EAAE,CAAC;IACvE,KAAAK,QAAQ,GAAU,CAAC,CAAC,CAAC;IAU3B;IACA,IAAI,CAACF,IAAI,CAACG,GAAG,CAAa,4BAA4B,IAAI,CAACD,QAAQ,EAAE,CAAE,CAACE,SAAS,CACrF;MACOC,IAAI,EAAEJ,IAAI,IAAK,IAAI,CAACA,IAAI,CAACI,IAAI,CAACJ,IAAI;KACpC,CAAC;EACJ;EAEAK,GAAGA,CAACC,OAAiB;IAGnB;;;;;;;;IASA;IAEA,IAAIC,IAAI,GAAG;MAACC,MAAM,EAAE,IAAI,CAACP,QAAQ;MAAEQ,SAAS,EAAEH,OAAO,CAACI;IAAS,CAAC;IAChE;IACA,IAAI,CAACX,IAAI,CAACY,IAAI,CAAC,WAAW,EAAEJ,IAAI,CAAC,CAACJ,SAAS,CAAES,QAAQ,IAAI;MAEzD;MAEE;IAAA,CACD,CAAC;EACJ;EAEAC,OAAOA,CAAA;IAEL,OAAO,IAAI,CAACb,IAAI,CAACc,YAAY,EAAE;EACjC;EAEA;EACAC,MAAMA,CAACT,OAAiB;IAEtB,IAAIU,GAAG,GAAG,YAAY,GAAG,IAAI,CAACf,QAAQ,GAAG,GAAG,GAAGK,OAAO,CAACI,SAAS;IAEhE,IAAI,CAACX,IAAI,CAACkB,MAAM,CAACD,GAAG,CAAC,CAACb,SAAS,CAAES,QAAQ,IAAI;MAC3CM,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGb,OAAO,CAACc,IAAI,GAAG,qBAAqB,GAAGR,QAAQ,CAAC;IACvF,CAAC,CAAC;EACH;;AA3DUf,WAAW,C;mBAAXA,WAAW,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAX3B,WAAW,C;SAAXA,WAAW;EAAA4B,OAAA,EAAX5B,WAAW,CAAA6B,IAAA;EAAAC,UAAA,EAHV;AAAM;SAGP9B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}