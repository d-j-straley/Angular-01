{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CartService } from '../cart/cart.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../cart/cart.service\";\nimport * as i2 from \"./product.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../product-details/product-details.component\";\nfunction CatalogComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 9)(1, \"bot-product-details\", 10);\n    i0.ɵɵlistener(\"buy\", function CatalogComponent_li_13_Template_bot_product_details_buy_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToCart(product_r1));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r1);\n  }\n}\nclass CatalogComponent {\n  constructor(cartSvc, productSvc, router, route) {\n    this.cartSvc = cartSvc;\n    this.productSvc = productSvc;\n    this.router = router;\n    this.route = route;\n    this.filter = '';\n    this._cartSvc = inject(CartService);\n  }\n  // Here's our \"lifecycle\" method. This is a method that Angular will call when the component is created.\n  ngOnInit() {\n    this.productSvc.getProducts().subscribe(products => {\n      this.products = products;\n      // Now that we have the products, we can log them to the console.\n      // this is just DJS' own request.\n      if (this.products.length > 0) {\n        for (let product of this.products) {\n          console.log(product);\n        }\n      }\n    });\n    this.filter = this.route.snapshot.params['filter'];\n    //  this.route.params.subscribe((params) =>\n  }\n\n  addToCart(product) {\n    this.cartSvc.add(product);\n    /* DJS; the following code does not do the whole job by itself;\n    apparently it does navigate us to another place, but it *not*\n    sufficient in itself; it needs to have the page refreshed after\n    navigating.  This may be something to be fixed.\n    */\n    this.router.navigate(['/cart']);\n  }\n  getDiscountedClasses(product) {\n    if (product.discount > 0) {\n      return ['strikethrough'];\n    } else {\n      return [''];\n    }\n  }\n  getFilteredProducts() {\n    return this.filter === '' ? this.products : this.products?.filter(product => product.categoryName === this.filter);\n  }\n}\nCatalogComponent.ɵfac = function CatalogComponent_Factory(t) {\n  return new (t || CatalogComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\nCatalogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CatalogComponent,\n  selectors: [[\"bot-catalog\"]],\n  decls: 14,\n  vars: 1,\n  consts: [[1, \"container\"], [1, \"filters\"], [\"routerLink\", \"/catalog/Heads\", 1, \"button\"], [\"routerLink\", \"/catalog/Arms\", 1, \"button\"], [\"routerLink\", \"/catalog/Torsos\", 1, \"button\"], [\"routerLink\", \"/catalog/Bases\", 1, \"button\"], [\"routerLink\", \"/catalog/\", 1, \"button\"], [1, \"products\"], [\"class\", \"product-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"product-item\"], [3, \"product\", \"buy\"]],\n  template: function CatalogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n      i0.ɵɵtext(3, \"Heads\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"a\", 3);\n      i0.ɵɵtext(5, \"Arms\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"a\", 4);\n      i0.ɵɵtext(7, \"Torsos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"a\", 5);\n      i0.ɵɵtext(9, \"Bases\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"a\", 6);\n      i0.ɵɵtext(11, \"All\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"ul\", 7);\n      i0.ɵɵtemplate(13, CatalogComponent_li_13_Template, 2, 1, \"li\", 8);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getFilteredProducts());\n    }\n  },\n  dependencies: [i4.NgForOf, i3.RouterLink, i5.ProductDetailsComponent],\n  styles: [\".bold[_ngcontent-%COMP%]\\r\\n{\\r\\n  font-weight: bold;\\r\\n}\\r\\n.container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.filters[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  padding: 25px 200px;\\r\\n}\\r\\n\\r\\n.filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  width: 100px;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%] {\\r\\n  margin: 0 100px;\\r\\n  border-top: 2px solid #999;\\r\\n}\\r\\n\\r\\n.product-item[_ngcontent-%COMP%] {\\r\\n  border-bottom: 2px solid #999;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2F0YWxvZy9jYXRhbG9nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7RUFFRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGVBQWU7RUFDZiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw2QkFBNkI7QUFDL0IiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbi5ib2xkXHJcbntcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4uY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbn1cclxuXHJcbi5maWx0ZXJzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBwYWRkaW5nOiAyNXB4IDIwMHB4O1xyXG59XHJcblxyXG4uZmlsdGVycyBidXR0b24ge1xyXG4gIHdpZHRoOiAxMDBweDtcclxufVxyXG5cclxuLnByb2R1Y3RzIHtcclxuICBtYXJnaW46IDAgMTAwcHg7XHJcbiAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICM5OTk7XHJcbn1cclxuXHJcbi5wcm9kdWN0LWl0ZW0ge1xyXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjOTk5O1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { CatalogComponent };","map":{"version":3,"names":["inject","CartService","i0","ɵɵelementStart","ɵɵlistener","CatalogComponent_li_13_Template_bot_product_details_buy_1_listener","restoredCtx","ɵɵrestoreView","_r3","product_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","addToCart","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","CatalogComponent","constructor","cartSvc","productSvc","router","route","filter","_cartSvc","ngOnInit","getProducts","subscribe","products","length","product","console","log","snapshot","params","add","navigate","getDiscountedClasses","discount","getFilteredProducts","categoryName","ɵɵdirectiveInject","i1","i2","ProductService","i3","Router","ActivatedRoute","selectors","decls","vars","consts","template","CatalogComponent_Template","rf","ctx","ɵɵtext","ɵɵtemplate","CatalogComponent_li_13_Template"],"sources":["C:\\djs\\dev\\Angular\\AngularFundamentals\\RobotClient\\04\\RobotClient\\RobotClient\\src\\app\\catalog\\catalog.component.ts","C:\\djs\\dev\\Angular\\AngularFundamentals\\RobotClient\\04\\RobotClient\\RobotClient\\src\\app\\catalog\\catalog.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\r\nimport { IProduct } from './product.model';\r\nimport { CartService } from '../cart/cart.service';\r\nimport { ProductService } from './product.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'bot-catalog',\r\n  templateUrl: './catalog.component.html',\r\n  styleUrls: ['./catalog.component.css']\r\n})\r\nexport class CatalogComponent {\r\n  products: IProduct[] | undefined;\r\n  filter: string = '';\r\n  private _cartSvc: CartService = inject(CartService);\r\n\r\n\r\n  constructor(\r\n    private cartSvc: CartService,\r\n    private productSvc: ProductService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  )\r\n  {\r\n    \r\n  }\r\n\r\n  // Here's our \"lifecycle\" method. This is a method that Angular will call when the component is created.\r\n  ngOnInit() {\r\n    this.productSvc.getProducts().subscribe((products) =>\r\n    {\r\n      this.products = products;\r\n      // Now that we have the products, we can log them to the console.\r\n      // this is just DJS' own request.\r\n      if (this.products.length > 0)\r\n      {\r\n        for (let product of this.products)\r\n        {\r\n          console.log(product);\r\n        }\r\n      }\r\n    });\r\n    this.filter = this.route.snapshot.params['filter'];\r\n  //  this.route.params.subscribe((params) =>\r\n\r\n  }\r\n   \r\n  addToCart(product: IProduct)\r\n  {\r\n    this.cartSvc.add(product);\r\n    /* DJS; the following code does not do the whole job by itself;\r\n    apparently it does navigate us to another place, but it *not*\r\n    sufficient in itself; it needs to have the page refreshed after\r\n    navigating.  This may be something to be fixed.\r\n    */  \r\n    this.router.navigate(['/cart']);\r\n  }\r\n\r\n  getDiscountedClasses(product: IProduct)\r\n  {\r\n    if (product.discount > 0)\r\n    {\r\n      return ['strikethrough'];\r\n    }\r\n    else\r\n    {\r\n      return [''];\r\n    }\r\n  } \r\n\r\n\r\n  getFilteredProducts()\r\n  {\r\n    return this.filter === ''\r\n      ? this.products\r\n      : this.products?.filter((product: IProduct) => product.categoryName === this.filter)\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"filters\">\r\n    <a routerLink=\"/catalog/Heads\" class=\"button\">Heads</a>\r\n    <a routerLink=\"/catalog/Arms\" class=\"button\">Arms</a>\r\n    <a routerLink=\"/catalog/Torsos\" class=\"button\">Torsos</a>\r\n    <a routerLink=\"/catalog/Bases\" class=\"button\">Bases</a>\r\n    <a routerLink=\"/catalog/\" class=\"button\">All</a>\r\n  </div>\r\n\r\n  <ul class=\"products\">\r\n     <li class=\"product-item\" *ngFor=\"let product of getFilteredProducts()\">\r\n      <bot-product-details [product]=\"product\" (buy)=\"addToCart(product)\"></bot-product-details>\r\n    </li>\r\n   </ul>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}