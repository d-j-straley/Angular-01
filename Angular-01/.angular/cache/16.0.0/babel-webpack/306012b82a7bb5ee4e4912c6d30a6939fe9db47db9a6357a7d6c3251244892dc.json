{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass CartService {\n  // This function returns the cart.\n  // This needs to be updated to include a UserID parameter, which we'll hardcode\n  // for now, but will need to be updated to be dynamic later.\n  // for now we'll hardcode the UserID as the server, but this will definitely\n  // have to be updated later.\n  constructor(http) {\n    this.http = http;\n    // This is the cart. It's an array of IProduct objects.\n    //cart: IProduct[] = [];\n    this.cart = new BehaviorSubject([]);\n    this._nUserID = 1; // DJS: Hardcoded for now, but will need to be dynamic later.\n    this.http.get(`/api/Cart/ProductsInCart/${this._nUserID}`).subscribe({\n      next: cart => this.cart.next(cart)\n    });\n  }\n  add(product) {\n    /* DJS: just push the individual product to the server, not the whole cart.\n     * The API on the server is expecting only a singular product, not the whole cart.\n     * Additionally, interestingly, if we do try to push the whole cart, the server will\n     * reject it with a 400 Bad Request error, presumably because the server realizes\n     * the we pushed and array of objects to it, not a singular object.  No problem,\n     * any shopping cart should only add one item at a time, not the whole cart, to the\n     * database.\n     */\n    //this.cart.push(product);\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\n    this.http.post('/api/Cart/' + this._nUserID + '/' + product.productID).subscribe(response => {\n      console.log('Added to cart: \"' + product.name + '\" with return code:' + response);\n    });\n  }\n  getCart() {\n    return this.cart.asObservable();\n  }\n  // This function removes a product from the cart.\n  remove(product) {\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\n    this.http.delete(url).subscribe(response => {\n      console.log('Removed from cart: \"' + product.name + '\" with return code:' + response);\n    });\n  }\n}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)(i0.ɵɵinject(i1.HttpClient));\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});\nexport { CartService };","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","http","cart","_nUserID","get","subscribe","next","add","product","url","productID","post","response","console","log","name","getCart","asObservable","remove","delete","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\djs\\dev\\Angular\\AngularFundamentals\\RobotClient\\01\\RobotClient\\src\\app\\cart\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { IProduct } from '../catalog/product.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class CartService\r\n{\r\n  // This is the cart. It's an array of IProduct objects.\r\n  //cart: IProduct[] = [];\r\n  private cart: BehaviorSubject<IProduct[]> = new BehaviorSubject<IProduct[]>([]);\r\n  private _nUserID:number = 1; // DJS: Hardcoded for now, but will need to be dynamic later.\r\n\r\n\r\n  // This function returns the cart.\r\n  // This needs to be updated to include a UserID parameter, which we'll hardcode\r\n  // for now, but will need to be updated to be dynamic later.\r\n  // for now we'll hardcode the UserID as the server, but this will definitely\r\n  // have to be updated later.\r\n  constructor(private http: HttpClient)\r\n  {\r\n    this.http.get<IProduct[]>(`/api/Cart/ProductsInCart/${this._nUserID}` ).subscribe(\r\n    {\r\n      next:(cart) => this.cart.next(cart),\r\n    });\r\n  }\r\n  \r\n  add(product: IProduct)\r\n  {\r\n\r\n    /* DJS: just push the individual product to the server, not the whole cart.\r\n     * The API on the server is expecting only a singular product, not the whole cart.\r\n     * Additionally, interestingly, if we do try to push the whole cart, the server will\r\n     * reject it with a 400 Bad Request error, presumably because the server realizes\r\n     * the we pushed and array of objects to it, not a singular object.  No problem,\r\n     * any shopping cart should only add one item at a time, not the whole cart, to the\r\n     * database.\r\n     */\r\n\r\n    //this.cart.push(product);\r\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\r\n    this.http.post('/api/Cart/' + this._nUserID + '/' + product.productID).subscribe((response) => {\r\n      console.log('Added to cart: \"' + product.name + '\" with return code:' + response);\r\n    })\r\n  }\r\n\r\n  getCart(): Observable<IProduct[]>\r\n  {\r\n    return this.cart.asObservable();\r\n  }\r\n\r\n  // This function removes a product from the cart.\r\n  remove(product: IProduct)\r\n  {\r\n    let url = '/api/Cart/' + this._nUserID + '/' + product.productID;\r\n\r\n    this.http.delete(url).subscribe((response) => {\r\n      console.log('Removed from cart: \"' + product.name + '\" with return code:' + response);\r\n    })\r\n   }\r\n\r\n}\r\n\r\n"],"mappings":"AAGA,SAASA,eAAe,QAAoB,MAAM;;;AAElD,MAIaC,WAAW;EAQtB;EACA;EACA;EACA;EACA;EACAC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAXxB;IACA;IACQ,KAAAC,IAAI,GAAgC,IAAIJ,eAAe,CAAa,EAAE,CAAC;IACvE,KAAAK,QAAQ,GAAU,CAAC,CAAC,CAAC;IAU3B,IAAI,CAACF,IAAI,CAACG,GAAG,CAAa,4BAA4B,IAAI,CAACD,QAAQ,EAAE,CAAE,CAACE,SAAS,CACjF;MACEC,IAAI,EAAEJ,IAAI,IAAK,IAAI,CAACA,IAAI,CAACI,IAAI,CAACJ,IAAI;KACnC,CAAC;EACJ;EAEAK,GAAGA,CAACC,OAAiB;IAGnB;;;;;;;;IASA;IACA,IAAIC,GAAG,GAAG,YAAY,GAAG,IAAI,CAACN,QAAQ,GAAG,GAAG,GAAGK,OAAO,CAACE,SAAS;IAChE,IAAI,CAACT,IAAI,CAACU,IAAI,CAAC,YAAY,GAAG,IAAI,CAACR,QAAQ,GAAG,GAAG,GAAGK,OAAO,CAACE,SAAS,CAAC,CAACL,SAAS,CAAEO,QAAQ,IAAI;MAC5FC,OAAO,CAACC,GAAG,CAAC,kBAAkB,GAAGN,OAAO,CAACO,IAAI,GAAG,qBAAqB,GAAGH,QAAQ,CAAC;IACnF,CAAC,CAAC;EACJ;EAEAI,OAAOA,CAAA;IAEL,OAAO,IAAI,CAACd,IAAI,CAACe,YAAY,EAAE;EACjC;EAEA;EACAC,MAAMA,CAACV,OAAiB;IAEtB,IAAIC,GAAG,GAAG,YAAY,GAAG,IAAI,CAACN,QAAQ,GAAG,GAAG,GAAGK,OAAO,CAACE,SAAS;IAEhE,IAAI,CAACT,IAAI,CAACkB,MAAM,CAACV,GAAG,CAAC,CAACJ,SAAS,CAAEO,QAAQ,IAAI;MAC3CC,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGN,OAAO,CAACO,IAAI,GAAG,qBAAqB,GAAGH,QAAQ,CAAC;IACvF,CAAC,CAAC;EACH;;AArDUb,WAAW,C;mBAAXA,WAAW,EAAAqB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXxB,WAAW,C;SAAXA,WAAW;EAAAyB,OAAA,EAAXzB,WAAW,CAAA0B,IAAA;EAAAC,UAAA,EAHV;AAAM;SAGP3B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}